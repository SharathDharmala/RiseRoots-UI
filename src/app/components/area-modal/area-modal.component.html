<div class="modal-backdrop" (click)="close()">
  <div class="modal" (click)="$event.stopPropagation()">
    <!-- HEADER -->
    <div class="modal-header">
      <h3>{{ title }}</h3>
      <button class="close-btn" (click)="close()">‚úï</button>
    </div>

    <!-- BODY -->
    <div
      class="modal-body"
      (mousedown)="onStart($event)"
      (mouseup)="onEnd($event)"
      (touchstart)="onStart($event)"
      (touchend)="onEnd($event)"
    >
      <!-- LEFT NAV -->
      <button class="nav left" [disabled]="currentIndex === 0" (click)="prev()">‚Äπ</button>

      <!-- WATERMARK -->
      <div class="watermark">RiseRoots</div>

      <!-- IMAGE -->
      <img
        *ngIf="currentIndex < media.length && getMediaType(media[currentIndex]) === 'image'"
        [src]="media[currentIndex]"
        class="slide-img"
        draggable="false"
        (dragstart)="$event.preventDefault()"
      />

      <!-- VIDEO -->
      <video
        *ngIf="currentIndex < media.length && getMediaType(media[currentIndex]) === 'video'"
        class="slide-video"
        [src]="media[currentIndex]"
        autoplay
        muted
        controls
        playsinline
      ></video>

      <!-- PDF -->
      <object
        *ngIf="currentIndex < media.length && getMediaType(media[currentIndex]) === 'pdf'"
        [data]="media[currentIndex]"
        type="application/pdf"
        class="slide-pdf"
      >
        <p class="pdf-fallback">
          PDF preview not supported.
          <a [href]="media[currentIndex]" target="_blank">Open PDF</a>
        </p>
      </object>

      <!-- UNSUPPORTED -->
      <div
        *ngIf="currentIndex < media.length && getMediaType(media[currentIndex]) === 'unknown'"
        class="unsupported"
      >
        Unsupported file format
      </div>

      <!-- CONTACT SLIDE -->
      <div *ngIf="currentIndex === media.length" class="contact-slide">
        <h3>Contact Us</h3>

        <div class="contact-wrapper">
          <div class="contact-row" *ngFor="let c of contacts">
            <div class="contact-number">üìû {{ c.phone }}</div>

            <div class="contact-actions">
              <a class="btn call" [href]="c.tel">Call</a>

              <a class="btn whatsapp" [href]="c.whatsapp" target="_blank" rel="noopener">
                Watsapp
              </a>
            </div>
          </div>

          <div class="contact-email">
            <a [href]="email.link"> ‚úâÔ∏è {{ email.value }} </a>
          </div>
        </div>
      </div>

      <!-- RIGHT NAV -->
      <button class="nav right" [disabled]="currentIndex === media.length" (click)="next()">
        ‚Ä∫
      </button>
    </div>

    <!-- FOOTER -->
    <div class="modal-footer">{{ currentIndex + 1 }} / {{ totalSlides }}</div>
  </div>
</div>
